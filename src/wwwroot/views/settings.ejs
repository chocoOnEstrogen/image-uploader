<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Settings - <!= user.Username !></title>

		<!-- Bootstrap CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		/>

		<!-- Custom CSS for additional styling -->
		<style>
			.settings-header {
				margin: 20px 0;
				text-align: center;
			}
			.settings-form {
				max-width: 700px;
				margin: 0 auto;
			}
			.form-control:focus {
				box-shadow: none;
			}
			.form-section {
				margin-bottom: 30px;
			}
			.profile-pic {
				width: 150px;
				height: 150px;
				object-fit: cover;
				margin-bottom: 20px;
			}
		</style>
	</head>
	<body>
		<%- include('_partials/header') %>
		<div class="container mt-5">
			<!-- Settings Header -->
			<div class="settings-header">
				<h2>Account Settings</h2>
				<p>Manage your profile information and account settings.</p>

				<% if (error != null) { %>
				<div class="alert alert-danger" role="alert"><%= error %></div>
				<% } %>
			</div>

			<!-- Settings Form -->
			<form
				class="settings-form"
				action="/settings"
				method="POST"
				enctype="multipart/form-data"
			>
				<!-- Profile Picture Update -->
				<div class="form-section text-center">
					<img
						src="/avatars/<%= user.ProfilePicture %>"
						alt="Profile Picture of <%= user.Username %>"
						class="rounded-circle profile-pic"
					/>
					<div class="mb-3">
						<label for="avatar" class="form-label"
							>Change Profile Picture</label
						>
						<input
							type="file"
							class="form-control"
							id="avatar"
							name="avatar"
							accept="image/*"
						/>
					</div>
				</div>

				<!-- Profile Information -->
				<div class="form-section">
					<h4>Profile Information</h4>
					<div class="mb-3">
						<label for="username" class="form-label">Username</label>
						<input
							type="text"
							class="form-control"
							id="username"
							name="username"
							value="<%= user.Username %>"
							required
						/>
					</div>
					<div class="mb-3">
						<label for="bio" class="form-label">Bio</label>
						<textarea class="form-control" id="bio" name="bio" rows="3">
<%= user.Bio %></textarea
						>
					</div>
				</div>

				<!-- Save Button -->
				<div class="text-center">
					<button type="submit" class="btn btn-primary">Save Changes</button>
				</div>
			</form>
		</div>

		<!-- Bootstrap JS and Popper.js -->
		<script
			src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
			integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
			crossorigin="anonymous"
			defer
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
			integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
			crossorigin="anonymous"
			defer
		></script>
	</body>
</html>
